---
title: 更新日志
description: 基于 Commit 记录整理（含正文与文件变更摘要）
---

# 更新日志（PVE-Tools-9）

> 本文基于仓库 Commit 记录整理，覆盖从项目创建到如今所有的的主要迭代内容。

## 2026年2月22日 - v6.5.0
### 🧩 NVIDIA 显卡管理与合规入口
- **新增 NVIDIA 显卡管理一级菜单**：包含显卡直通虚拟机、vGPU 配置与分配、驱动信息与监控、驱动切换与回滚
- **修复无 NVIDIA GPU 环境的交互错乱**：缺少设备时直接提示并返回，避免输出污染与异常报错
- **新增许可同意界面**：首次运行需同意条款（Y/N），条款详情通过文档站链接查看
- **文档站新增 TOS/ULA**：拆分为两个独立页面并加入导航入口

---

## 2026年2月22日 - v6.4.0
### 💽 磁盘/控制器直通与引导辅助
- **新增 RDM 单盘直通**：从 `/dev/disk/by-id/` 自动发现可直通整盘，支持 scsi/sata/ide 总线直通，并支持 `--delete` 取消直通
- **新增控制器直通**：自动扫描 SATA/SCSI/RAID 控制器并展示控制器下磁盘映射，直通前自动检查 IOMMU 状态
- **关键安全保护**：自动识别并拦截包含 PVE 系统盘的控制器直通，降低误操作导致宿主机崩溃的风险
- **新增 NVMe 直通**：识别 NVMe 控制器，并支持按需写入 MSI-X 重定位参数提升兼容性
- **新增引导配置辅助**：识别直通磁盘的 UEFI/Legacy 类型，给出 VM 固件类型、机器类型与启动顺序建议

---

## 2026年2月7日 - v6.3.0
### 🎨 UI 视觉系统全面进化
- **重构颜色引擎**：实现基于 `printf` 的 ANSI 变量定义，彻底解决在部分环境下的转义字符乱码问题
- **视觉风格统一**：引入 `UI_BORDER`、`UI_DIVIDER` 等常量，确保全脚本菜单边框、标题风格高度一致
- **交互色彩优化**：
    - 针对 **核显虚拟化** 模块，强化了【危险警告】的视觉冲击力（危险红+警告黄）
    - 优化了 **系统信息概览**，使用色彩区分不同硬件状态与网络接口
    - 为所有子菜单添加了功能分类高亮（青色标注），提升操作指引清晰度
- **兼容性增强**：针对 PVE 网页控制台（noVNC）进行了色彩降级适配，确保在 16 色模式下不失真、不显示全灰

---

## 2026年2月7日 - v6.2.0
### ✨ 新增虚拟机与容器定时开关机管理
- 新增定时任务管理菜单，支持对虚拟机（qm）和容器（pct）进行自动识别与配置
- 实现基于 `/etc/cron.d/` 的幂等配置管理，支持自定义开关机时间并自动重启服务
- 文档网站新增脚本下载源切换功能，支持多线路（Cloudflare/GitHub/CDN）选择
- 优化文档网站视觉效果，为标题及页脚添加渐变色与颗粒感质感

---

## 2026年2月6日 - v6.2.0-pre
### 🚀 官方文档网站上线与架构重构
- 推出 **官方文档网站（VitePress）**，包含完整使用指南、功能特性及 FAQ
- 重构脚本菜单结构，采用更清晰的二级菜单分类
- 新增配置块安全管理函数，支持带标记的幂等修改
- 引入 GRUB 参数幂等管理函数，实现对 `/etc/default/grub` 配置的精准增删
- 优化核显虚拟化（SR-IOV/GVT-g）配置逻辑，自动处理驱动冲突
- 在脚本中新增大量“图吧”风格的随机小贴士，提升用户体验
- 为 Cloudflare Workers 部署添加配置支持

---

## 2026年2月3日
### 🔧 优化 iGPU SR-IOV 配置兼容性
- 优化 iGPU SR-IOV 配置以兼容 PVE 9.1
- 在 GRUB 参数中添加 `module_blacklist=xe`，防止 6.8+ 内核中新的 xe 驱动与 i915 驱动冲突

---

## 2026年1月20日 - v6.0.1
### 🛠️ 优化磁盘休眠检测逻辑
- 在磁盘休眠检测中增加对 SAS 协议的判断，避免对 SAS 盘使用 hdparm 导致误报
- 更新 star 统计数量至 1K

---

## 2026年1月14日 - v6.0.0
### 🎉 重大更新：核显直通自动化与救砖工具
- 版本号从 5.0.0 升级至 6.0.0
- 重构主菜单结构，采用二级菜单分类，提升交互体验
- 新增 Intel 6-14 代核显直通自动化配置功能，支持自动下载 ROM 和修改版 QEMU
- 新增“应急救砖工具箱”，支持恢复官方 proxmoxlib.js、重置驱动黑名单及还原官方 QEMU
- 优化 CI/CD 流程，引入 shc 将脚本编译为二进制文件发布
- 优化日志记录机制，减少控制台冗余输出
- 优化移除 PVE 订阅弹窗的匹配逻辑，提高对新版本 PVE 的兼容性

---

## 2026年1月6日
### 🧹 界面优化与清理
- 移除菜单和版本信息中的多余空行，保持界面整洁统一

---

## 2025年12月15日
### 🔋 UPS监控功能增强
- 新增从 apcaccess status 中解析 NOMPOWER，展示 UPS 额定功率（W）
- 根据 NOMPOWER 与 LOADPCT 估算当前功率，并在 UI 中显示
- 对 STATUS 做中文化映射（ONLINE / ONBATT / CHRG / DISCHRG）
- 兼容 OUTPUTV / LINEV 两种电压字段
- 对缺失字段增加默认值，避免异常导致整块 UPS 信息解析失败

---

## 2025年12月3-9日
### 📖 文档与体验优化
- 清理 README 冗余内容，优化排版
- 更新项目状态说明，增加维护公告
- 修复国际网络安装脚本链接，更新快捷命令

---

## 2025年11月28日 - v5.0.0
### 🧩 功能优化与社区贡献
- 修复检查更新耗时过久的问题
- 优化 UI，删除过于重复和臃肿的 UI 元素
- 删除部分功能中的颜色代码
- 新增虚拟机快速安装脚本
- 修复错误的 CT 模板（社区贡献修复 Ceph 源配置问题）
- 新增核显显卡直通、显卡虚拟化功能

---

## 2025年11月21日
### 🔧 驱动与兼容性修复
- 修复 AMD 系列 CPU 温度显示出现异常的问题
- 核显直通部分驱动选择问题修复完成

---

## 2025年11月11日
### 🖥️ 新增核显直通与UPS监控
- 修复 UPS 监控项目异常，优化无设备情况下的显示逻辑
- 新增核显直通菜单和功能项
- 更新展示截图

---

## 2025年11月4日
### 📊 新增UPS信息检测
- 新增 UPS 信息检测功能（感谢社区代码贡献）
- 修复温度传感器显示部分模块的问题
- 修改 README，关闭相关 issue

---

## 2025年10月24日
### 🔧 修复CT模板源问题
- 修复 CT 模板地址错误的问题
- 修复错误的 CT 源配置

---

## 2025年10月23日
### 🛡️ 用户反馈修复与优化
- 移除传感器检测项目的可选配置项
- 修复新增/修改传感器后信息框被遮挡的显示问题
- 更新小工具来源配置
- 优化系统稳定性与性能表现

---

## 2025年10月17日 - v4.1.0
### 🧰 第三方工具集成与生态扩展
- 集成 tteck/Proxmox 社区的 13 个实用工具
- 智能下载管理（curl 优先，进度显示）
- 安全执行机制（二次确认 + 日志审计）
- 优化 TUI 颜色显示，保持界面和谐
- 新增 Tools 目录和完整文档
- 新增多个辅助脚本：monitor-all.sh、netdata.sh、post-install 脚本等
- 更新版本号并修复日志输出中的颜色代码问题

---

## 2025年10月11日 - v4.0.0
### 🔄 重大重构：UI优化与功能增强
- 修复颜色代码显示问题，使用 echo -e 替代 printf
- 简化所有UI边框元素为普通虚线，移除颜色格式化
- 改进 install_kernel 函数，支持完整包名和版本号两种格式
- 合并温度监控选项到专用子菜单，合并Ceph相关选项到专用子菜单
- 实现交互式温度监控菜单系统，支持详细传感器配置
- 改进 check_update() 函数，支持从VERSION和UPDATE双文件获取更新信息
- 新增通用下载函数 download_file，替代原有 download_version_file
- 新增UPDATE文件支持详细更新内容展示
- 重新编号主菜单选项（1-13），优化交互流程

---

## 2025年10月5日
### 🎨 UI交互优化
- 优化 UI 交互界面操作统一性
- 替换新的展示截图

---

## 2025年9月28日
### 📦 安全更新与功能扩展
- 合入PVE安全镜像源，建议尽快升级脚本并且换源
- 新增 PVE8 一键升级 PVE9 功能
- 新增未来指南文档和多张功能截图
- 修复错误的图片引用和贡献者渲染图

---

## 2025年9月19日 - v3.x
### 🔐 安全镜像源与版本管理
- 新增镜像源选择功能和版本检查
- 修复镜像源备份文件的存放位置会被误识别警告的问题
- 删除不应该存在的更新日志文件
- 更新版本号文件
- 添加关于多次拉取文件的警告提示
- 为版本检查添加网络检测和跳过功能
- 在横幅中添加版本信息显示
- 优化脚本输出文案和格式
- 更新展示截图
- 合入社区贡献的安全镜像源配置

---

## 2025年9月15日
### 🧠 内核管理功能
- 新增内核切换功能和相关文档
- 添加 .gitignore 文件
- 后续优化文档并删除临时文件

---

## 2025年9月11日
### 🧹 清理遗留问题
- 移除遗漏的emoji字符

---

## 2025年9月9日 - v2.x
### 🚀 功能爆发期：多模块新增
- 新增硬件直通配置（开启/关闭）
- 新增 CPU 电源模式管理（performance、powersave 等）
- 新增 CPU 与硬盘温度监控
- 新增 Ceph 存储支持（ceph-squid、ceph-quincy）
- 新增 Ceph 卸载功能
- 新增调试模式支持，使用 --debug 标志跳过 PVE 检测
- 去除无法显示的Emoji，修复逻辑问题
- 优化日志函数输出格式
- 新增英文文档 README-EN.md
- 更新README添加快速开始指南和提交历史徽章
- 扩展主菜单，新增选项 8–14

---

## 2025年9月1-2日 - v1.x
### 🌱 项目创建与基础功能
- 初始提交：LICENSE、README.md、PVE-Tools.sh
- 持续优化 README.md，修复字符画显示问题
- 修复遗漏特别鸣谢问题
- 修复脚本中的小问题
